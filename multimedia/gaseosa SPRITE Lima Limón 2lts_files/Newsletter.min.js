(window.webpackJsonpvtex_store_newsletter_1_3_0=window.webpackJsonpvtex_store_newsletter_1_3_0||[]).push([["Newsletter"],{0:function(e,t){e.exports=React},1:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return v}));var a=n(3),i=n(0),r=n.n(i),s=n(4),l=n(5),u=n.n(l),c=Object(i.createContext)(void 0),o=Object(i.createContext)(void 0);function d(e,t){switch(t.type){case"UPDATE_EMAIL":return Object.assign(Object.assign({},e),{email:t.value});case"UPDATE_NAME":return Object.assign(Object.assign({},e),{name:t.value});case"UPDATE_PHONE":return Object.assign(Object.assign({},e),{phone:t.value});case"UPDATE_CONFIRMATION":return Object.assign(Object.assign({},e),{confirmation:t.value});case"SET_INVALID_EMAIL":return Object.assign(Object.assign({},e),{invalidEmail:t.value});case"SET_INVALID_NAME":return Object.assign(Object.assign({},e),{invalidName:t.value});case"SET_INVALID_PHONE":return Object.assign(Object.assign({},e),{invalidPhone:t.value});case"SET_MUTATION_VALUES":return Object.assign(Object.assign({},e),{submission:t.value});case"SET_CUSTOM_VALUES":return Object.assign(Object.assign({},e),{customFields:t.value});default:return e}}function m(e){var t=Object(s.useMutation)(u.a),n=Object(a.a)(t,2),l=n[0],m=n[1],v=m.data,f=m.loading,b=m.error,E=Object(i.useReducer)(d,{email:"",name:null,phone:null,customFields:null,confirmation:null,invalidEmail:!1,invalidName:!1,invalidPhone:!1,subscribe:l,submission:{data:v,loading:f,error:b}}),N=Object(a.a)(E,2),p=N[0],g=N[1];return Object(i.useEffect)((function(){g({type:"SET_MUTATION_VALUES",value:{loading:f,error:b,data:v}})}),[b,f,v]),r.a.createElement(c.Provider,{value:p},r.a.createElement(o.Provider,{value:g},e.children))}function v(){var e=Object(i.useContext)(c);if(void 0===e)throw new Error("useNewsletterState must be used within a NewsletterContextProvider");return e}function f(){var e=Object(i.useContext)(o);if(void 0===e)throw new Error("useNewsletterDispatch must be used within a NewsletterContextProvider");return e}},15:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.pixel-manager@1.x/usePixel"]},28:function(e,t,n){"use strict";n.r(t),function(e){var t=n(2);n.p=Object(t.getPublicPath)("vtex.store-newsletter@1.3.0");var a=Object(t.register)((function(){return n(29)}),e,"vtex.store-newsletter@1.3.0","vtex.store-newsletter@1.x","Newsletter");a.renderHotReload,a.setupHMR}.call(this,n(10)(e))},29:function(e,t,n){"use strict";n.r(t),n.d(t,"CSS_HANDLES",(function(){return v}));var a=n(0),i=n.n(a),r=n(8),s=n(6),l=n.n(s),u=n(15),c=n.n(u),o=n(1),d=/^[A-z0-9"+_-]+(?:\.[A-z0-9+_-]+)*@(?:[A-z0-9](?:[A-z0-9-]*[A-z0-9])?\.)+[A-z0-9](?:[A-z0-9-]*[A-z0-9])?$/,m=/([0-9]|\(|\)|\+| |-)+/;var v=["newsletterForm","defaultSuccessMessage","defaultErrorMessage"];function f(e){var t,n=e.ErrorState,a=e.SuccessState,s=e.LoadingState,u=e.classes,f=e.children,b=e.customEventId,E=Object(o.c)(),N=E.email,p=E.name,g=E.phone,w=E.submission,h=E.subscribe,k=E.customFields,_=Object(o.b)(),O=c()().push,S=l()(v,{classes:u}).handles;if(w.loading&&s)return i.a.createElement(s,null);if(w.error)return n?i.a.createElement(n,null):i.a.createElement("p",{className:S.defaultErrorMessage},i.a.createElement(r.FormattedMessage,{id:"store/newsletter-submit-error.default"}));if(null===(t=w.data)||void 0===t?void 0:t.subscribeNewsletter)return a?i.a.createElement(a,{subscribedUserData:{email:N,name:p,phone:g}}):i.a.createElement("p",{className:S.defaultSuccessMessage},i.a.createElement(r.FormattedMessage,{id:"store/newsletter-submit-success.default"}));function A(){var e=function(e){return d.test(e)}(N),t=null===p||function(e){return e.length>0}(p),n=null===g||function(e){return m.test(e)}(g);return _({type:"SET_INVALID_EMAIL",value:!e}),_({type:"SET_INVALID_NAME",value:!t}),_({type:"SET_INVALID_PHONE",value:!n}),t&&n&&e}return i.a.createElement("form",{className:S.newsletterForm,onSubmit:function(e){if(e.preventDefault(),A()){var t={name:p,email:N,phone:g};O(b?{id:b,event:"newsletterSubscription",data:t}:{event:"newsletterSubscription",data:t});var n=function(e){var t=e.email,n=e.name,a=e.phone,i=e.customFields,r={email:t,fields:{}};return n&&(r.fields.name=n),a&&(r.fields.phone=a),i&&i.forEach((function(e){r.fields[e.name]=e.value})),r}({email:N,name:p,phone:g,customFields:k});h({variables:n}).catch((function(){}))}}},f)}function b(e){return i.a.createElement(o.a,null,i.a.createElement(f,e,e.children))}b.schema={title:"admin/editor.newsletter-form.title"};t.default=b},4:function(e,t){e.exports=ReactApollo},5:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"subscribeNewsletter"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"fields"}},type:{kind:"NamedType",name:{kind:"Name",value:"NewsletterFieldsInput"}},directives:[]}],directives:[{kind:"Directive",name:{kind:"Name",value:"context"},arguments:[{kind:"Argument",name:{kind:"Name",value:"provider"},value:{kind:"StringValue",value:"vtex.store-graphql",block:!1}},{kind:"Argument",name:{kind:"Name",value:"sender"},value:{kind:"StringValue",value:"vtex.store-newsletter@1.3.0",block:!1}}]},{kind:"Directive",name:{kind:"Name",value:"runtimeMeta"},arguments:[{kind:"Argument",name:{kind:"Name",value:"hash"},value:{kind:"StringValue",value:"7e8c62d8e9b26b7043954da16e970bdf3aaf854cd2c84344ee408386d70803d2",block:!1}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subscribeNewsletter"},arguments:[{kind:"Argument",name:{kind:"Name",value:"email"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}},{kind:"Argument",name:{kind:"Name",value:"fields"},value:{kind:"Variable",name:{kind:"Name",value:"fields"}}}],directives:[]}]}}],loc:{start:0,end:302}};n.loc.source={body:'mutation subscribeNewsletter($email: String, $fields: NewsletterFieldsInput) @context(provider: "vtex.store-graphql", sender: "vtex.store-newsletter@1.3.0") @runtimeMeta(hash: "7e8c62d8e9b26b7043954da16e970bdf3aaf854cd2c84344ee408386d70803d2") {\n  subscribeNewsletter(email: $email, fields: $fields)\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function i(e,t){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==t)return a}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var a=t.type;"NamedType"===a.kind&&n.add(a.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),a[e.name.value]=t}})),e.exports=n,e.exports.subscribeNewsletter=function(e,t){var n={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=a[t]||new Set,s=new Set,l=new Set;for(r.forEach((function(e){l.add(e)}));l.size>0;){var u=l;l=new Set,u.forEach((function(e){s.has(e)||(s.add(e),(a[e]||new Set).forEach((function(e){l.add(e)})))}))}return s.forEach((function(t){var a=i(e,t);a&&n.definitions.push(a)})),n}(n,"subscribeNewsletter")},6:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.css-handles@1.x/useCssHandles"]},8:function(e,t){e.exports=ReactIntl}},[[28,"common"]]]);